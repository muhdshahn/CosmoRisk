<!doctype html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <link rel="stylesheet" href="/src/styles.css" />
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link
    href="https://fonts.googleapis.com/css2?family=JetBrains+Mono:wght@300;400;500;600;700&family=Orbitron:wght@400;500;600;700;800;900&display=swap"
    rel="stylesheet">
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />

  <!-- SEO & Open Graph -->
  <meta name="description"
    content="High-fidelity Near-Earth Object tracking and deflection simulator with N-body physics, NASA API integration, and cinematic visualization." />
  <meta name="keywords"
    content="NEO, asteroid, simulation, orbital mechanics, planetary defense, NASA, Three.js, Tauri" />
  <meta name="author" content="Mehmet G√ºm√º≈ü" />

  <!-- Open Graph / Social -->
  <meta property="og:type" content="website" />
  <meta property="og:title" content="CosmoRisk - NEO Defense Simulator" />
  <meta property="og:description" content="Track and deflect Near-Earth Objects with physics-accurate simulation." />
  <meta property="og:image" content="/assets/og-image.png" />

  <!-- Twitter -->
  <meta name="twitter:card" content="summary_large_image" />
  <meta name="twitter:title" content="CosmoRisk" />
  <meta name="twitter:description" content="NEO Tracking & Deflection Simulator" />

  <!-- Favicon -->
  <link rel="icon" type="image/svg+xml" href="/assets/favicon.svg" />
  <link rel="apple-touch-icon" href="/assets/apple-touch-icon.png" />

  <title>CosmoRisk - NEO Tracker & Deflection Simulator</title>
  <script type="module" src="/src/main.ts" defer></script>
</head>

<body>
  <!-- Three.js Canvas Container -->
  <div id="viewport"></div>

  <!-- Loading Screen -->
  <div id="loading-screen">
    <div class="loader-content">
      <!-- Minimal Orbit Animation -->
      <div class="splash-logo-container">
        <svg class="splash-orbit-svg" viewBox="0 0 120 120" width="140" height="140">
          <!-- Outer orbit ring -->
          <ellipse class="orbit-path" cx="60" cy="60" rx="50" ry="20" fill="none" stroke="url(#orbitGradient)"
            stroke-width="1.5" transform="rotate(-20 60 60)" />

          <!-- Central core glow -->
          <circle class="core-glow" cx="60" cy="60" r="12" fill="url(#coreGradient)" />
          <circle class="core-inner" cx="60" cy="60" r="6" fill="#00d4ff" />

          <!-- Orbiting dot -->
          <circle class="orbit-dot" r="4" fill="#00d4ff">
            <animateMotion dur="3s" repeatCount="indefinite">
              <mpath href="#orbitMotionPath" />
            </animateMotion>
          </circle>

          <!-- Motion path (invisible) -->
          <ellipse id="orbitMotionPath" cx="60" cy="60" rx="50" ry="20" fill="none" stroke="none"
            transform="rotate(-20 60 60)" />

          <!-- Gradients -->
          <defs>
            <linearGradient id="orbitGradient" x1="0%" y1="0%" x2="100%" y2="0%">
              <stop offset="0%" stop-color="#00d4ff" stop-opacity="0.2" />
              <stop offset="50%" stop-color="#00d4ff" stop-opacity="0.8" />
              <stop offset="100%" stop-color="#7b68ee" stop-opacity="0.2" />
            </linearGradient>
            <radialGradient id="coreGradient" cx="50%" cy="50%" r="50%">
              <stop offset="0%" stop-color="#00d4ff" stop-opacity="0.4" />
              <stop offset="100%" stop-color="#00d4ff" stop-opacity="0" />
            </radialGradient>
          </defs>
        </svg>
      </div>

      <h1 class="loader-title">
        <span class="title-cosmo">COSMO</span><span class="title-risk">RISK</span>
      </h1>
      <p class="loader-tagline">Track. Analyze. Defend.</p>
      <p class="loader-subtitle">Near-Earth Object Defense Simulator</p>

      <!-- Premium progress bar -->
      <div class="loader-progress">
        <div class="loader-bar" id="loader-bar"></div>
        <div class="loader-bar-glow"></div>
      </div>
      <p class="loader-status" id="loader-status">Initializing physics engine...</p>
      <p class="loader-version">v2.0.1 ‚Ä¢ ¬© 2025 Mehmet G√ºm√º≈ü</p>
    </div>
  </div>

  <!-- Main UI Overlay -->
  <div id="ui-overlay" class="hidden">
    <!-- Top Bar -->
    <header id="top-bar">
      <!-- Mobile Hamburger Menu -->
      <button class="hamburger-btn" id="hamburger-btn" aria-label="Toggle Menu">
        <span class="hamburger-line"></span>
        <span class="hamburger-line"></span>
        <span class="hamburger-line"></span>
      </button>

      <div class="logo-section">
        <div class="logo-icon">
          <svg viewBox="0 0 40 40" width="32" height="32">
            <circle cx="20" cy="20" r="8" fill="none" stroke="currentColor" stroke-width="2" />
            <ellipse cx="20" cy="20" rx="18" ry="6" fill="none" stroke="currentColor" stroke-width="1"
              transform="rotate(-20 20 20)" />
            <circle cx="32" cy="14" r="3" fill="currentColor" />
          </svg>
        </div>
        <div class="logo-text">
          <span class="logo-title">COSMORISK</span>
          <span class="logo-subtitle">NEO Defense Simulator v2.0</span>
        </div>
      </div>

      <!-- Search Bar (Desktop) -->
      <div class="search-section">
        <input type="text" id="asteroid-search" class="search-input" placeholder="Search asteroids...">
        <button class="search-btn" id="btn-search">üîç</button>
      </div>

      <div class="telemetry-section">
        <div class="telemetry-item">
          <span class="telemetry-label">JD</span>
          <span class="telemetry-value" id="julian-date">2451545.0</span>
        </div>
        <div class="telemetry-item">
          <span class="telemetry-label">TIME</span>
          <span class="telemetry-value" id="sim-time">T+0d 00:00:00</span>
        </div>
        <div class="telemetry-item">
          <span class="telemetry-label">OBJECTS</span>
          <span class="telemetry-value" id="object-count">3</span>
        </div>
        <div class="telemetry-item energy-monitor">
          <span class="telemetry-label">ŒîE</span>
          <span class="telemetry-value" id="energy-drift">0.000e+00</span>
        </div>
      </div>

      <div class="status-section">
        <button class="help-btn" id="btn-settings" title="Settings">‚öôÔ∏è</button>
        <button class="help-btn" id="btn-about" title="About CosmoRisk">‚ÑπÔ∏è</button>
        <button class="help-btn" id="btn-help" title="Keyboard Shortcuts (?)">?</button>
        <div class="status-indicator" id="status-indicator">
          <span class="status-dot paused"></span>
          <span class="status-text">PAUSED</span>
        </div>
      </div>
    </header>

    <!-- Mobile Navigation Overlay -->
    <div id="mobile-nav" class="mobile-nav hidden">
      <div class="mobile-nav-content" id="mobile-nav-content">
        <!-- Will be populated with panel content -->
      </div>
    </div>

    <!-- Left Panel - Control -->
    <aside id="left-panel">
      <div class="panel-section">
        <h3 class="panel-title">TIME CONTROL</h3>
        <div class="control-group">
          <button class="control-btn" id="btn-play" title="Play/Pause">
            <span class="btn-icon">‚ñ∂</span>
          </button>
          <button class="control-btn" id="btn-reset" title="Reset">
            <span class="btn-icon">‚Ü∫</span>
          </button>
        </div>
        <div class="slider-group">
          <label class="slider-label">Time Scale</label>
          <input type="range" id="time-scale" class="slider" min="1" max="6" step="1" value="3">
          <div class="slider-value" id="time-scale-value">x1 day/s</div>
        </div>
        <div class="slider-group">
          <label class="slider-label">Time Step (dt)</label>
          <input type="range" id="time-step" class="slider" min="1" max="4" step="1" value="2">
          <div class="slider-value" id="time-step-value">1 hour</div>
        </div>
      </div>

      <div class="panel-section">
        <h3 class="panel-title">DATA SOURCE</h3>
        <div class="input-group">
          <label class="input-label">NASA API Key</label>
          <input type="password" id="api-key" class="text-input" placeholder="Enter API key...">
        </div>
        <button class="action-btn" id="btn-fetch-neo">
          <span class="btn-icon">‚¨á</span> Fetch NEOs
        </button>
        <button class="action-btn secondary" id="btn-fetch-more">
          <span class="btn-icon">+</span> Load More
        </button>
        <button class="action-btn secondary" id="btn-export" style="margin-top: 8px;">
          <span class="btn-icon">üì•</span> Export Data
        </button>
        <!-- Date Range Search -->
        <div style="margin-top: 12px; padding-top: 12px; border-top: 1px solid var(--color-border);">
          <label class="slider-label" style="color: var(--color-accent);">üìÖ Search by Date</label>
          <div class="input-group" style="margin-top: 8px;">
            <label class="input-label">Start Date</label>
            <input type="date" id="search-start-date" class="text-input">
          </div>
          <div class="input-group">
            <label class="input-label">End Date</label>
            <input type="date" id="search-end-date" class="text-input">
          </div>
          <button class="action-btn secondary" id="btn-fetch-by-date" style="margin-top: 8px;">
            <span class="btn-icon">üîç</span> Search by Date
          </button>
        </div>
        <!-- NEO ID Search -->
        <div style="margin-top: 12px; padding-top: 12px; border-top: 1px solid var(--color-border);">
          <label class="slider-label" style="color: var(--color-accent);">üî¢ Search by ID</label>
          <div class="input-group" style="margin-top: 8px;">
            <label class="input-label">NASA NEO ID</label>
            <input type="text" id="neo-id-input" class="text-input" placeholder="e.g., 3542519">
          </div>
          <button class="action-btn secondary" id="btn-fetch-by-id" style="margin-top: 8px;">
            <span class="btn-icon">üéØ</span> Fetch Asteroid
          </button>
        </div>
      </div>

      <!-- Asteroid List -->
      <div class="panel-section collapsible">
        <h3 class="panel-title">üõ∞Ô∏è ASTEROID LIST</h3>
        <div class="asteroid-list-controls">
          <select id="asteroid-sort" class="asteroid-sort">
            <option value="distance">Sort by Distance</option>
            <option value="name">Sort by Name</option>
            <option value="size">Sort by Size</option>
            <option value="hazard">Hazardous First</option>
          </select>
        </div>
        <div id="asteroid-list" class="asteroid-list">
          <div class="info-placeholder">
            <span class="placeholder-icon">üìä</span>
            <p>Load asteroids to see list</p>
          </div>
        </div>
      </div>

      <div class="panel-section">
        <h3 class="panel-title">VISUALIZATION</h3>
        <div class="checkbox-group">
          <label class="checkbox-label">
            <input type="checkbox" id="show-orbits" checked>
            <span class="checkbox-custom"></span>
            Show Orbit Paths
          </label>
        </div>
        <div class="checkbox-group">
          <label class="checkbox-label">
            <input type="checkbox" id="show-labels" checked>
            <span class="checkbox-custom"></span>
            Show Labels
          </label>
        </div>
        <div class="checkbox-group">
          <label class="checkbox-label">
            <input type="checkbox" id="show-grid">
            <span class="checkbox-custom"></span>
            Ecliptic Grid
          </label>
        </div>
        <div class="checkbox-group">
          <label class="checkbox-label">
            <input type="checkbox" id="post-processing" checked>
            <span class="checkbox-custom"></span>
            Post-Processing (Bloom/SSAO)
          </label>
        </div>
        <div class="checkbox-group">
          <label class="checkbox-label">
            <input type="checkbox" id="show-hazardous-only">
            <span class="checkbox-custom"></span>
            ‚ö†Ô∏è Show Hazardous Only
          </label>
        </div>
      </div>
    </aside>

    <!-- Right Panel - Info -->
    <aside id="right-panel">
      <div class="panel-section">
        <h3 class="panel-title">SELECTED OBJECT</h3>
        <div id="selected-info" class="info-display">
          <div class="info-placeholder">
            <span class="placeholder-icon">‚óå</span>
            <p>Click on an object to view details</p>
          </div>
        </div>
      </div>

      <div class="panel-section">
        <h3 class="panel-title">DEFLECTION CONTROL</h3>
        <div class="deflection-controls hidden" id="deflection-controls">
          <div class="input-group">
            <label class="input-label">Œîv X (m/s)</label>
            <input type="number" id="dv-x" class="number-input" value="0" step="0.1">
          </div>
          <div class="input-group">
            <label class="input-label">Œîv Y (m/s)</label>
            <input type="number" id="dv-y" class="number-input" value="0" step="0.1">
          </div>
          <div class="input-group">
            <label class="input-label">Œîv Z (m/s)</label>
            <input type="number" id="dv-z" class="number-input" value="0" step="0.1">
          </div>
          <div class="info-row" style="margin: 10px 0;">
            <span class="info-label">|Œîv| Magnitude</span>
            <span class="info-value" id="dv-magnitude">0.00 m/s</span>
          </div>
          <div class="checkbox-group">
            <label class="checkbox-label">
              <input type="checkbox" id="show-trajectory">
              <span class="checkbox-custom"></span>
              Show Trajectory Preview
            </label>
          </div>
          <button class="action-btn danger" id="btn-apply-impulse">
            <span class="btn-icon">‚ö°</span> Kinetic Impactor
          </button>

          <!-- Ion Beam Deflection -->
          <div style="margin-top: 12px; padding-top: 12px; border-top: 1px solid var(--color-border);">
            <label class="slider-label">Ion Beam Thrust (ŒºN)</label>
            <input type="range" id="ion-thrust" class="slider" min="1" max="1000" step="10" value="100">
            <div class="slider-value" id="ion-thrust-value">100 ŒºN</div>
            <label class="slider-label" style="margin-top: 8px;">Duration (days)</label>
            <input type="range" id="ion-duration" class="slider" min="1" max="365" step="1" value="30">
            <div class="slider-value" id="ion-duration-value">30 days</div>
            <button class="action-btn secondary" id="btn-apply-ion" style="margin-top: 10px;">
              <span class="btn-icon">üí®</span> Apply Ion Beam
            </button>
          </div>
          <!-- Gravity Tractor Deflection -->
          <div style="margin-top: 12px; padding-top: 12px; border-top: 1px solid var(--color-border);">
            <label class="slider-label" style="color: var(--color-accent);">üõ∞Ô∏è Gravity Tractor</label>
            <div class="input-group" style="margin-top: 8px;">
              <label class="input-label">Spacecraft Mass (kg)</label>
              <input type="number" id="gt-mass" class="number-input" value="5000" step="500" min="500" max="50000">
            </div>
            <div class="input-group">
              <label class="input-label">Hover Distance (m)</label>
              <input type="number" id="gt-distance" class="number-input" value="100" step="10" min="50" max="500">
            </div>
            <div class="input-group">
              <label class="input-label">Duration (days)</label>
              <input type="number" id="gt-duration" class="number-input" value="365" step="30" min="30" max="3650">
            </div>
            <button class="action-btn secondary" id="btn-apply-gravity-tractor" style="margin-top: 10px;">
              <span class="btn-icon">üõ∞Ô∏è</span> Apply Gravity Tractor
            </button>
            <div id="gt-result" class="gt-result hidden"
              style="margin-top: 8px; padding: 8px; background: var(--color-surface); border-radius: 4px;">
              <div class="info-row">
                <span class="info-label">Œîv Applied</span>
                <span class="info-value" id="gt-delta-v">-</span>
              </div>
              <div class="info-row">
                <span class="info-label">Est. Deflection Time</span>
                <span class="info-value" id="gt-time">-</span>
              </div>
            </div>
          </div>
        </div>
        <div class="deflection-placeholder" id="deflection-placeholder">
          <p>Select an asteroid to enable deflection controls</p>
        </div>
      </div>

      <!-- Impact Prediction with Torino/Palermo Scale -->
      <div class="panel-section">
        <h3 class="panel-title">IMPACT ANALYSIS</h3>
        <div id="impact-info" class="info-display">
          <div class="info-placeholder">
            <span class="placeholder-icon">üéØ</span>
            <p>Select an asteroid to view approach data</p>
          </div>
        </div>
        <!-- Torino Scale Display -->
        <div id="torino-display" class="torino-scale hidden">
          <div class="torino-header">
            <span class="torino-label">TORINO SCALE</span>
            <span class="torino-value" id="torino-value">0</span>
          </div>
          <div class="torino-bar">
            <div class="torino-segment white" data-level="0"></div>
            <div class="torino-segment green" data-level="1"></div>
            <div class="torino-segment yellow" data-level="2-4"></div>
            <div class="torino-segment orange" data-level="5-7"></div>
            <div class="torino-segment red" data-level="8-10"></div>
          </div>
          <div class="torino-description" id="torino-description">No hazard</div>
        </div>
        <!-- MOID Display -->
        <div id="moid-display" class="moid-info hidden">
          <div class="info-row">
            <span class="info-label">MOID (AU)</span>
            <span class="info-value" id="moid-value">-</span>
          </div>
          <div class="info-row">
            <span class="info-label">MOID (LD)</span>
            <span class="info-value" id="moid-ld-value">-</span>
          </div>
        </div>
        <!-- Monte Carlo Analysis -->
        <div id="monte-carlo-section" class="monte-carlo-controls hidden">
          <h4 style="margin: 12px 0 8px; color: var(--color-accent);">üé≤ Monte Carlo Analysis</h4>
          <div class="input-group">
            <label class="input-label">Position Uncertainty (km)</label>
            <input type="number" id="mc-pos-uncertainty" class="number-input" value="1000" step="100" min="100">
          </div>
          <div class="input-group">
            <label class="input-label">Velocity Uncertainty (m/s)</label>
            <input type="number" id="mc-vel-uncertainty" class="number-input" value="10" step="1" min="1">
          </div>
          <div class="input-group">
            <label class="input-label">Simulation Days</label>
            <input type="number" id="mc-days" class="number-input" value="365" step="30" min="30" max="3650">
          </div>
          <button class="action-btn" id="btn-run-monte-carlo">
            <span class="btn-icon">üé≤</span> Run Monte Carlo (1000 runs)
          </button>
          <!-- Monte Carlo Results -->
          <div id="mc-results" class="mc-results hidden">
            <div class="info-row">
              <span class="info-label">Impact Probability</span>
              <span class="info-value" id="mc-probability">-</span>
            </div>
            <div class="info-row">
              <span class="info-label">Mean MOID (km)</span>
              <span class="info-value" id="mc-mean-moid">-</span>
            </div>
            <div class="info-row">
              <span class="info-label">Min MOID (km)</span>
              <span class="info-value" id="mc-min-moid">-</span>
            </div>
            <div class="info-row">
              <span class="info-label">Palermo Scale</span>
              <span class="info-value" id="mc-palermo">-</span>
            </div>
          </div>
        </div>
      </div>

      <!-- Asteroid Info Panel -->
      <div class="panel-section">
        <h3 class="panel-title">ASTEROID INFO</h3>
        <div id="asteroid-info" class="info-display">
          <div class="info-placeholder">
            <span class="placeholder-icon">üìö</span>
            <p>Select an asteroid for facts</p>
          </div>
        </div>
        <div id="asteroid-details" class="asteroid-details hidden">
          <div class="info-row">
            <span class="info-label">Spectral Type</span>
            <span class="info-value" id="spectral-type">-</span>
          </div>
          <div class="info-row">
            <span class="info-label">Est. Mass (kg)</span>
            <span class="info-value" id="est-mass">-</span>
          </div>
          <div class="info-row">
            <span class="info-label">Est. Density</span>
            <span class="info-value" id="est-density">-</span>
          </div>
          <a href="#" id="wiki-link" class="wiki-link hidden" target="_blank">
            üìñ View on Wikipedia
          </a>
        </div>
      </div>

      <!-- Historical Impacts -->
      <div class="panel-section collapsible">
        <h3 class="panel-title">üåç HISTORICAL IMPACTS</h3>
        <div class="historical-impacts">
          <div class="impact-item" data-event="chelyabinsk">
            <span class="impact-name">Chelyabinsk (2013)</span>
            <span class="impact-size">~20m, 500kt</span>
          </div>
          <div class="impact-item" data-event="tunguska">
            <span class="impact-name">Tunguska (1908)</span>
            <span class="impact-size">~60m, 10-15Mt</span>
          </div>
          <div class="impact-item" data-event="chicxulub">
            <span class="impact-name">Chicxulub (66Ma)</span>
            <span class="impact-size">~10km, extinction</span>
          </div>
        </div>
      </div>

      <div class="panel-section">
        <h3 class="panel-title">ENERGY CONSERVATION</h3>
        <canvas id="energy-chart" width="280" height="100"></canvas>
      </div>

      <!-- Screenshot/Export -->
      <div class="panel-section">
        <button class="action-btn" id="btn-screenshot">
          <span class="btn-icon">üì∑</span> Capture Screenshot
        </button>
      </div>

      <!-- Scenario Save/Load -->
      <div class="panel-section">
        <h3 class="panel-title">üíæ SCENARIOS</h3>
        <div class="scenario-controls">
          <button class="action-btn secondary" id="btn-save-scenario">
            <span class="btn-icon">üíæ</span> Save State
          </button>
          <select id="scenario-list" class="scenario-select">
            <option value="">-- Saved Scenarios --</option>
          </select>
          <button class="action-btn" id="btn-load-scenario">
            <span class="btn-icon">üìÇ</span> Load State
          </button>
        </div>
      </div>

      <!-- Help & Education -->
      <div class="panel-section">
        <h3 class="panel-title">üìö LEARN</h3>
        <div class="help-buttons">
          <button class="action-btn secondary" id="btn-tutorial">
            <span class="btn-icon">üéì</span> Tutorial
          </button>
          <button class="action-btn secondary" id="btn-glossary">
            <span class="btn-icon">üìñ</span> Glossary
          </button>
        </div>
        <div class="help-buttons" style="margin-top: 8px;">
          <button class="action-btn secondary" id="btn-random-fact">
            <span class="btn-icon">üí°</span> Did You Know?
          </button>
        </div>
      </div>

      <!-- View Controls -->
      <div class="panel-section">
        <h3 class="panel-title">üëÅÔ∏è VIEW</h3>
        <div class="help-buttons">
          <button class="action-btn secondary" id="btn-zoom-fit">
            <span class="btn-icon">‚äû</span> Zoom to Fit
          </button>
          <button class="action-btn secondary" id="btn-toggle-theme">
            <span class="btn-icon">üåì</span> Theme
          </button>
        </div>
        <div class="help-buttons" style="margin-top: 8px;">
          <button class="action-btn secondary" id="btn-multi-select">
            <span class="btn-icon">‚òëÔ∏è</span> Multi-Select
          </button>
          <button class="action-btn secondary" id="btn-realtime-sync">
            <span class="btn-icon">üïê</span> Real-Time
          </button>
        </div>
        <div class="help-buttons" style="margin-top: 8px;">
          <button class="action-btn secondary" id="btn-pdf-export">
            <span class="btn-icon">üìÑ</span> Export Report
          </button>
        </div>
      </div>
    </aside>

    <!-- Bottom Bar -->
    <footer id="bottom-bar">
      <div class="footer-left">
        <span class="footer-label">CAMERA:</span>
        <span class="footer-value" id="camera-info">Heliocentric | Zoom: 1.0 AU</span>
      </div>
      <div class="footer-center">
        <span class="footer-label">INTEGRATOR:</span>
        <span class="footer-value">Velocity Verlet (Symplectic)</span>
      </div>
      <div class="footer-right">
        <span class="footer-label">FPS:</span>
        <span class="footer-value" id="fps-counter">60</span>
      </div>

      <!-- Distance Scale Ruler -->
      <div class="distance-scale" id="distance-scale">
        <div class="scale-bar"></div>
        <span class="scale-label" id="scale-label">1 AU</span>
      </div>

      <!-- Camera Preset Buttons -->
      <div class="footer-camera-presets">
        <button class="camera-preset-btn" id="cam-sun" title="Sun View">‚òÄÔ∏è</button>
        <button class="camera-preset-btn" id="cam-earth" title="Earth View">üåç</button>
        <button class="camera-preset-btn" id="cam-top" title="Top-Down View">‚¨ÜÔ∏è</button>
      </div>
    </footer>
  </div>

  <!-- Tooltip -->
  <div id="tooltip" class="hidden">
    <div class="tooltip-content"></div>
  </div>

  <!-- Keyboard Shortcuts Modal -->
  <div id="shortcuts-modal" class="modal hidden">
    <div class="modal-backdrop"></div>
    <div class="modal-content">
      <div class="modal-header">
        <h2>‚å®Ô∏è Keyboard Shortcuts</h2>
        <button class="modal-close" id="close-shortcuts">&times;</button>
      </div>
      <div class="modal-body">
        <div class="shortcut-group">
          <h4>Simulation</h4>
          <div class="shortcut-row"><kbd>Space</kbd><span>Play / Pause</span></div>
          <div class="shortcut-row"><kbd>R</kbd><span>Reset Simulation</span></div>
          <div class="shortcut-row"><kbd>+</kbd><span>Speed Up</span></div>
          <div class="shortcut-row"><kbd>-</kbd><span>Slow Down</span></div>
        </div>
        <div class="shortcut-group">
          <h4>Camera</h4>
          <div class="shortcut-row"><kbd>1</kbd><span>Sun View</span></div>
          <div class="shortcut-row"><kbd>2</kbd><span>Earth View</span></div>
          <div class="shortcut-row"><kbd>3</kbd><span>Top-Down View</span></div>
          <div class="shortcut-row"><kbd>Scroll</kbd><span>Zoom In/Out</span></div>
        </div>
        <div class="shortcut-group">
          <h4>Interface</h4>
          <div class="shortcut-row"><kbd>?</kbd><span>Show Shortcuts</span></div>
          <div class="shortcut-row"><kbd>O</kbd><span>Toggle Orbits</span></div>
          <div class="shortcut-row"><kbd>G</kbd><span>Toggle Grid</span></div>
          <div class="shortcut-row"><kbd>Esc</kbd><span>Close Modal</span></div>
        </div>
      </div>
    </div>
  </div>

  <!-- Onboarding Tutorial Modal -->
  <div id="tutorial-modal" class="modal hidden">
    <div class="modal-backdrop"></div>
    <div class="modal-content tutorial-content">
      <div class="modal-header">
        <h2>üöÄ Welcome to Orbital Sentinel</h2>
        <button class="modal-close" id="close-tutorial">&times;</button>
      </div>
      <div class="modal-body">
        <div class="tutorial-slides">
          <div class="tutorial-slide active" data-step="1">
            <div class="tutorial-icon">üåç</div>
            <h3>Near-Earth Object Tracker</h3>
            <p>Orbital Sentinel simulates asteroids that pass close to Earth. You can visualize their orbits, analyze
              their potential impact risk, and simulate deflection missions.</p>
          </div>
          <div class="tutorial-slide" data-step="2">
            <div class="tutorial-icon">üñ±Ô∏è</div>
            <h3>Selecting Objects</h3>
            <p>Click on any asteroid in the 3D view to select it. You'll see its orbit path, distance line to Earth, and
              detailed information in the right panel.</p>
          </div>
          <div class="tutorial-slide" data-step="3">
            <div class="tutorial-icon">‚ö°</div>
            <h3>Deflection Control</h3>
            <p>When an asteroid is selected, use the Deflection Controls to apply velocity changes (Œîv) via kinetic
              impactor or ion beam to alter its trajectory.</p>
          </div>
          <div class="tutorial-slide" data-step="4">
            <div class="tutorial-icon">üìä</div>
            <h3>Risk Assessment</h3>
            <p>The Torino Scale (0-10) and MOID (Minimum Orbit Intersection Distance) help assess the potential hazard
              level of each asteroid.</p>
          </div>
          <div class="tutorial-slide" data-step="5">
            <div class="tutorial-icon">üíæ</div>
            <h3>What-If Scenarios</h3>
            <p>Save your simulation state before applying deflections. Load saved states to compare different scenarios
              and strategies.</p>
          </div>
        </div>
        <div class="tutorial-nav">
          <button class="tutorial-btn" id="tutorial-prev" disabled>‚Üê Previous</button>
          <div class="tutorial-dots" id="tutorial-dots"></div>
          <button class="tutorial-btn primary" id="tutorial-next">Next ‚Üí</button>
        </div>
        <label class="checkbox-label tutorial-checkbox">
          <input type="checkbox" id="dont-show-again">
          <span class="checkbox-custom"></span>
          Don't show this again
        </label>
      </div>
    </div>
  </div>

  <!-- Glossary Modal -->
  <div id="glossary-modal" class="modal hidden">
    <div class="modal-backdrop"></div>
    <div class="modal-content">
      <div class="modal-header">
        <h2>üìñ Glossary</h2>
        <button class="modal-close" id="close-glossary">&times;</button>
      </div>
      <div class="modal-body glossary-body">
        <div class="glossary-item">
          <h4>NEO (Near-Earth Object)</h4>
          <p>Asteroids or comets with orbits that bring them within 1.3 AU of the Sun.</p>
        </div>
        <div class="glossary-item">
          <h4>PHA (Potentially Hazardous Asteroid)</h4>
          <p>NEOs with MOID ‚â§ 0.05 AU and absolute magnitude H ‚â§ 22 (diameter ‚â• 140m).</p>
        </div>
        <div class="glossary-item">
          <h4>MOID (Minimum Orbit Intersection Distance)</h4>
          <p>The closest distance between two orbits. Shows how close an asteroid could potentially get to Earth.</p>
        </div>
        <div class="glossary-item">
          <h4>Torino Scale</h4>
          <p>A 0-10 scale assessing asteroid impact hazard. 0 = no hazard, 10 = certain global catastrophe.</p>
        </div>
        <div class="glossary-item">
          <h4>Palermo Scale</h4>
          <p>Logarithmic scale comparing impact risk to background hazard level. Negative = below average, >0 = above
            average.</p>
        </div>
        <div class="glossary-item">
          <h4>Delta-v (Œîv)</h4>
          <p>Change in velocity. The "currency" of space maneuvers, measured in m/s.</p>
        </div>
        <div class="glossary-item">
          <h4>Kinetic Impactor</h4>
          <p>Deflection method where a spacecraft crashes into an asteroid at high speed to change its trajectory (e.g.,
            DART mission).</p>
        </div>
        <div class="glossary-item">
          <h4>Gravity Tractor</h4>
          <p>Slow deflection method using a spacecraft's gravity to gradually alter an asteroid's orbit over years.</p>
        </div>
        <div class="glossary-item">
          <h4>Yarkovsky Effect</h4>
          <p>Thermal radiation force on rotating asteroids that slowly changes their orbits over millennia.</p>
        </div>
        <div class="glossary-item">
          <h4>AU (Astronomical Unit)</h4>
          <p>Average Earth-Sun distance: ~149.6 million km. Standard unit for solar system distances.</p>
        </div>
        <div class="glossary-item">
          <h4>LD (Lunar Distance)</h4>
          <p>Earth-Moon distance: ~384,400 km. Used for close approaches.</p>
        </div>
        <div class="glossary-item">
          <h4>Julian Date (JD)</h4>
          <p>Continuous count of days since January 1, 4713 BC. Astronomers' standard time system.</p>
        </div>
      </div>
    </div>
  </div>

  <!-- Comparison Table Modal -->
  <div id="comparison-modal" class="modal hidden">
    <div class="modal-backdrop"></div>
    <div class="modal-content" style="max-width: 700px;">
      <div class="modal-header">
        <h2>üìä ASTEROID COMPARISON</h2>
        <button class="modal-close" id="close-comparison">&times;</button>
      </div>
      <div class="modal-body">
        <div id="comparison-table-body">
          <p style="color: var(--color-text-secondary);">Select asteroids to compare using Multi-Select mode.</p>
        </div>
      </div>
    </div>
  </div>

  <!-- Mobile Bottom Sheet -->
  <div id="bottom-sheet" class="bottom-sheet">
    <div class="bottom-sheet-header">
      <div class="bottom-sheet-handle"></div>
      <button class="modal-close" id="close-bottom-sheet">&times;</button>
    </div>
    <div id="bottom-sheet-content" class="bottom-sheet-body">
    </div>
  </div>

  <!-- Mobile Bottom Navigation -->
  <div class="mobile-bottom-nav">
    <button class="mobile-nav-btn" id="btn-sheet-left">
      <span>üìä</span>
      <span>Controls</span>
    </button>
    <button class="mobile-nav-btn" id="btn-compare">
      <span>‚öñÔ∏è</span>
      <span>Compare</span>
    </button>
    <button class="mobile-nav-btn" id="btn-sheet-right">
      <span>üéØ</span>
      <span>Analysis</span>
    </button>
  </div>

  <!-- About Modal -->
  <div id="about-modal" class="modal hidden">
    <div class="modal-backdrop"></div>
    <div class="modal-content" style="max-width: 450px;">
      <div class="modal-header">
        <h2>üöÄ About CosmoRisk</h2>
        <button class="modal-close" id="close-about">&times;</button>
      </div>
      <div class="modal-body">
        <div style="text-align: center; margin-bottom: 20px;">
          <div style="font-size: 48px; margin-bottom: 10px;">üåå</div>
          <h3 style="color: var(--color-accent-primary); margin-bottom: 5px;">CosmoRisk</h3>
          <p style="color: var(--color-text-dim);">NEO Defense Simulator</p>
          <p style="font-size: 1.2rem; color: var(--color-accent-secondary);">v2.0.1</p>
        </div>
        <div class="info-display" style="margin-bottom: 15px;">
          <div class="info-row">
            <span class="info-label">Developer</span>
            <span class="info-value">Mehmet G√ºm√º≈ü</span>
          </div>
          <div class="info-row">
            <span class="info-label">License</span>
            <span class="info-value">MIT</span>
          </div>
          <div class="info-row">
            <span class="info-label">Built with</span>
            <span class="info-value">Tauri + Rust + Three.js</span>
          </div>
          <div class="info-row">
            <span class="info-label">Physics Engine</span>
            <span class="info-value">Velocity Verlet N-Body</span>
          </div>
        </div>
        <div style="display: flex; gap: 10px; justify-content: center;">
          <a href="https://github.com/SpaceEngineerSS/CosmoRisk" target="_blank" class="action-btn secondary"
            style="text-decoration: none; display: inline-flex; align-items: center; justify-content: center; width: auto; padding: 8px 16px;">
            <span class="btn-icon">üêô</span> GitHub
          </a>
          <a href="https://spacegumus.com.tr" target="_blank" class="action-btn secondary"
            style="text-decoration: none; display: inline-flex; align-items: center; justify-content: center; width: auto; padding: 8px 16px;">
            <span class="btn-icon">üåê</span> Website
          </a>
        </div>
        <p style="text-align: center; margin-top: 15px; color: var(--color-text-dim); font-size: 0.8rem;">
          ¬© 2025 Mehmet G√ºm√º≈ü. All rights reserved.
        </p>
      </div>
    </div>
  </div>

  <!-- Settings Modal -->
  <div id="settings-modal" class="modal hidden">
    <div class="modal-backdrop"></div>
    <div class="modal-content" style="max-width: 400px;">
      <div class="modal-header">
        <h2>‚öôÔ∏è Settings</h2>
        <button class="modal-close" id="close-settings">&times;</button>
      </div>
      <div class="modal-body">
        <div class="input-group" style="margin-bottom: 15px;">
          <label class="input-label">NASA API Key</label>
          <input type="password" id="settings-api-key" class="text-input" placeholder="Enter your NASA API key...">
          <p style="font-size: 0.75rem; color: var(--color-text-dim); margin-top: 5px;">
            Get a free key at <a href="https://api.nasa.gov" target="_blank"
              style="color: var(--color-accent-primary);">api.nasa.gov</a>
          </p>
        </div>
        <div class="checkbox-group" style="margin-bottom: 15px;">
          <label class="checkbox-label">
            <input type="checkbox" id="settings-save-key">
            <span class="checkbox-custom"></span>
            Remember API Key
          </label>
        </div>
        <div class="input-group" style="margin-bottom: 15px;">
          <label class="input-label">Distance Unit</label>
          <select id="settings-distance-unit" class="asteroid-sort">
            <option value="au">Astronomical Units (AU)</option>
            <option value="km">Kilometers (km)</option>
            <option value="ld">Lunar Distances (LD)</option>
          </select>
        </div>
        <div class="checkbox-group" style="margin-bottom: 15px;">
          <label class="checkbox-label">
            <input type="checkbox" id="settings-sound-enabled" checked>
            <span class="checkbox-custom"></span>
            Enable Sound Effects
          </label>
        </div>
        <button class="action-btn" id="btn-save-settings" style="margin-top: 10px;">
          <span class="btn-icon">üíæ</span> Save Settings
        </button>
      </div>
    </div>
  </div>

  <!-- Toast Notification Container -->
  <div id="toast-container"></div>
</body>

</html>